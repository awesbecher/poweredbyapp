
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Powered_by: Custom AI Agents for SMBs</title>
    <meta name="description" content="Deploy bespoke voice, email & SMS AI agents to automate support, sales & scheduling for your small to medium business. Get started with Powered_by Agency." />
    <meta name="author" content="Powered_by Agency" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    <meta property="og:title" content="Custom AI Agents for SMBs | Powered_by Agency" />
    <meta property="og:description" content="Deploy bespoke voice, email & SMS AI agents to automate support, sales & scheduling for your small to medium business." />
    <meta property="og:type" content="website" />
    <link rel="icon" href="/lovable-uploads/6824f512-cd18-4a70-ba33-41c138d9be24.png" />
    
    <!-- Enhanced preconnects to speed up external resource loading -->
    <link rel="preconnect" href="https://tally.so" crossorigin />
    <link rel="dns-prefetch" href="https://tally.so" />
    <link rel="preconnect" href="https://www.youtube.com" crossorigin />
    <link rel="dns-prefetch" href="https://www.youtube.com" />
    <link rel="preconnect" href="https://www.youtube-nocookie.com" crossorigin />
    <link rel="dns-prefetch" href="https://www.youtube-nocookie.com" />

    <style>
      /* Improved styling for Tally embed with additional fallbacks */
      .tally-form-container {
        width: 100% !important;
        overflow: hidden !important;
        min-height: 350px !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        background-color: transparent !important;
        padding-bottom: 64px !important; /* Increased from 48px to 64px */
      }
      
      .tally-form-container iframe {
        width: 100% !important;
        min-height: 350px !important;
        border: none !important;
        background-color: transparent !important;
        overflow: hidden !important;
      }
      
      /* Make sure iframe fits properly with more specific selectors */
      iframe[src*="tally.so"] {
        width: 100% !important;
        height: 100% !important;
        min-height: 350px !important;
        border: none !important;
        background: transparent !important;
        overflow: hidden !important;
        display: block !important;
      }
      
      /* Agent form specific styles */
      .agent-tally-form iframe[src*="tally.so"] {
        min-height: 1300px !important; /* Increased from 1100px to 1300px */
      }
      
      /* Ensure YouTube embeds are visible and interactive */
      iframe[src*="youtube"] {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        max-width: 100% !important;
        border: none !important;
      }
    </style>
    
    <!-- Preload and load Tally script with higher priority -->
    <link rel="preload" href="https://tally.so/widgets/embed.js" as="script" crossorigin />
    <script async defer src="https://tally.so/widgets/embed.js" crossorigin="anonymous"></script>
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Enhanced fallback for Tally and YouTube loading -->
    <script>
      // Improved script to ensure Tally and YouTube embeds load properly
      window.addEventListener('load', function() {
        // Initialize Tally after window load
        setTimeout(function() {
          if (window.Tally) {
            console.log('Window load event - initializing Tally');
            try {
              window.Tally.loadEmbeds();
            } catch (e) {
              console.error('Error initializing Tally:', e);
            }
          }
          
          // Force YouTube iframes to reload
          document.querySelectorAll('iframe[src*="youtube"]').forEach(function(iframe) {
            const currentSrc = iframe.src;
            iframe.src = '';
            setTimeout(function() {
              iframe.src = currentSrc;
            }, 100);
          });
        }, 1000);
      });
      
      // Backup initialization in case DOMContentLoaded fires after script loads
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
          if (window.Tally) {
            console.log('DOM ready - initializing Tally');
            try {
              window.Tally.loadEmbeds();
            } catch (e) {
              console.error('Error initializing Tally:', e);
            }
          }
        }, 1500);
      });
    </script>
  </body>
</html>
